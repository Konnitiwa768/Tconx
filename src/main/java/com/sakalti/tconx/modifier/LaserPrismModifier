package com.sakalti.tconx.trait;

import net.minecraft.world.damagesource.DamageSource;
import net.minecraft.world.entity.LivingEntity;
import net.minecraft.world.level.Level;

import java.util.List;

public class LaserPrismModifier {

    /**
     * FireWall効果を適用するメカニズム
     * @param world ワールド
     * @param source Traitを持つ対象エンティティ
     * @param level Traitレベル
     */
    public static void applyFireWallEffect(Level world, LivingEntity source, int level) {
        if (world.isClientSide || source == null || level <= 0) return;

        double radius = 8.0D + level;
        float damage = 1.0F * level;

        List<LivingEntity> nearbyEntities = world.getEntitiesOfClass(LivingEntity.class,
                source.getBoundingBox().inflate(radius),
                entity -> entity != source && entity.isAlive());

        for (LivingEntity target : nearbyEntities) {
            target.hurt(world.damageSources().onFire(), damage);
        }
    }
}
